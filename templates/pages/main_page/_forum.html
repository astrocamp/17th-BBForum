{%load static%}
<div class="desktop-only w-[760px] mx-3.5">
    <div class="h-[132px] mt-3 bg-gray-90 flex justify-center items-center pt-4 pb-4">
        <img class="w-[760px] h-[132px] object-cover" src="static/images/invenstment.png" alt="ad"/>
    </div>
    <div class="mt-3">
        <div class="mt-2 mb-2">
            <ul class="flex flex-wrap items-center gap-2">
                <li class="text-red-primary text-[14px]">首頁</li>
                <li class="flex items-center"><i class="fa-solid fa-angle-right fa-xs text-black-69"></i></li>
                <li class="text-[14px]">熱門股市爆料</li>
            </ul>
        </div>
        <div class="mt-4">
            <div class="flex justify-between relative after:content-[''] after:block after:w-full after:h-[2px] after:bg-gray-221 after:absolute after:-bottom-[3px] after:left-0">
                <div>
                    <h2 class="text-[20px] font-bold pb-2 -mb-[1px] border-b-[3px] border-b-red-900 leading-[18px]">熱門股市爆料</h2>
                </div>
            </div>
        </div>
        <div class="mt-4">
            <section x-data="unlogined_share({{ user.is_authenticated|lower }})" class="rounded-[3px] bg-white h-[72px] shadow-area">
                <div class="flex items-center gap-2 p-4">


                    <div  class="w-[40px] h-[40px] rounded-full border border-gray-94 flex items-center overflow-hidden">

                        {% if user_img %}
                       <img src="{{ user_img.url }}" alt="User Image" style="max-w-full max-h-full object-fit: cover;" />
                      {% else %}
                         <img src="{% static 'images/visitor.svg' %}" alt="visitor"></img>
                      {% endif %}
                     </div>





                    <button @click="toggleVisibility" class="flex-grow pt-2 pb-2 pl-4 pr-4 text-left rounded-[50px] bg-gray-94">
                        <div class="text-[18px] font-normal leading-[21px] text-black-69">想和大家分享什麼呢？</div>
                    </button>
                    <template x-if="!isAuthenticated">
                        {% include "layouts/not_logged.html" %}
                    </template>
                    <template x-if="isAuthenticated">
                        {% include "layouts/publish_article.html" %}
                    </template>
                </div>
            </section>
            <section class="rounded-[3px] bg-white h-[60px] mt-3 shadow-area">
                <div class="relative flex flex-wrap items-center justify-between">
                    <nav class="flex items-center w-full p-[16px]">
                        <ul class="flex items-center flex-grow gap-1 overflow-x-auto">
                            <li>
                                <a href="#" class="inline-block pt-1 pb-1 pl-2 pr-2 rounded-[3px] bg-red-primary">
                                    <div class="text-[15px] text-white whitespace-nowrap relative">人氣</div>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="inline-block pt-1 pb-1 pl-2 pr-2 rounded-[3px]">
                                    <div class="text-[15px] text-dark-800 whitespace-nowrap relative">新聞</div>
                                </a>
                            </li>
                        </ul>
                        <div class="flex items-center cursor-pointer">
                            <span class="text-[14px] font-bold leading-5 tracking-[0.2px] text-black-56">最相關</span>
                            <i class="fa-solid fa-sort-down w-[10px] h-[15px] text-black-56 mb-2 ml-1 mr-1"></i>
                        </div>
                    </nav>
                </div>
            </section>

            {% if forms %}
                {{ forms.id }}
                <form action="" method="POST">
                    {% csrf_token %}

                    {% for field in forms %}
                        {{ field }}
                    {% endfor %}

                    <button>update</button>
                </form>
            {% endif %}

            {% if articles %}
                {% include "pages/main_page/_articles_list.html" with articles=articles %}
            {% else %}
                <div id="articles_container">
                    {% for article in articles %}
                        {% include "pages/main_page/_article.html" with article=article %}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>
</div>
<aside class="desktop-only w-[260px]">
    <div class="shadow-area rounded-[3px] bg-white">
        <div class="desktop-only p-4 ">
            <div>
                <div>
                    <header class="mb-4 leading-4">
                        <div>
                            <div class="flex justify-between relative after:content-[''] after:block after:w-full after:h-[2px] after:bg-gray-221 after:absolute after:-bottom-1 after:left-0">
                                <div class="relative z-1">
                                    <h2 class="text-lg font-bold pb-2 -mb-[2px] border-b-[3px] border-b-red-900 leading-[18px]">大盤走勢</h2>

                                </div>
                                <div>
                                    <div>
                                        <button class="pt-[3px] pb-[3px] pl-[6px] pr-[6px] rounded-[3px] bg-red-primary text-white"><div class="text-[12px]">上市</div></button>
                                        <button class="pt-[3px] pb-[3px] pl-[6px] pr-[6px] rounded-[3px]"><div class="text-[12px]">上櫃</div></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </header>
                    <div class="w-[260px]  flex flex-grow items-center overflow-hidden">
                        <iframe src="http://127.0.0.1:8050/" style="height:200px;width: 250px;margin-left: -1em;"  frameborder="0" scrolling="no"></iframe>
                    </div>
                </div>
            </div>
            <div class="mt-5">
                <div>
                    <div>
                        <header class="mb-4 leading-4">
                            <div>
                                <div class="flex justify-between relative after:content-[''] after:block after:w-full after:h-[2px] after:bg-gray-221 after:absolute after:-bottom-1 after:left-0">
                                    <div class="relative z-1">
                                        <h2 class="text-lg font-bold pb-2 -mb-[2px] border-b-[3px] border-b-red-900 leading-[18px]">熱門股票</h2>
                                    </div>
                                    <div>
                                        <a href="#" class="pt-[6px] pb-[6px] text-sm text-red-900">更多</a>
                                    </div>
                                </div>
                            </div>
                        </header>
                        <div>
                          <ul class="list-none">
                            <li class="flex justify-between items-center group mt-4">
                              <div>
                                <div class="text-red-primary hover:underline">
                                  <a href="#">2330 台積電</a>
                                </div>
                              </div>
                              <button
                                x-data="optional_stock({{ user.is_authenticated|lower }})"
                                x-init="isAuthenticated? checkPickStatus('{% url 'picks:check_pick_api' 2330 %}') : false"
                                x-ref="buttonStyle"
                                @click="startPick('{% url 'picks:pick_api' 2330 %}', '{% url 'picks:unpick_api' 2330 %}', '{% url 'picks:check_pick_api' 2330 %}', `{{csrf_token}}`)"
                              ></button>
                            </li>
                            <li class="flex justify-between items-center group mt-4">
                              <div>
                                <div class="text-red-primary hover:underline">
                                  <a href="#">2317 鴻海</a>
                                </div>
                              </div>
                              <button
                                x-data="optional_stock({{ user.is_authenticated|lower }})"
                                x-init="isAuthenticated? checkPickStatus('{% url 'picks:check_pick_api' 2317 %}') : false"
                                x-ref="buttonStyle"
                                @click="startPick('{% url 'picks:pick_api' 2317 %}', '{% url 'picks:unpick_api' 2317 %}', '{% url 'picks:check_pick_api' 2317 %}', `{{csrf_token}}`)"
                              ></button>
                            </li>
                            <li class="flex justify-between items-center group mt-4">
                              <div>
                                <div class="text-red-primary hover:underline">
                                  <a href="#">2454 聯發科</a>
                                </div>
                              </div>
                              <button
                                x-data="optional_stock({{ user.is_authenticated|lower }})"
                                x-init="isAuthenticated? checkPickStatus('{% url 'picks:check_pick_api' 2454 %}') : false"
                                x-ref="buttonStyle"
                                @click="startPick('{% url 'picks:pick_api' 2454 %}', '{% url 'picks:unpick_api' 2454 %}', '{% url 'picks:check_pick_api' 2454 %}', `{{csrf_token}}`)"
                              ></button>
                            </li>
                            <li class="flex justify-between items-center group mt-4">
                              <div>
                                <div class="text-red-primary hover:underline">
                                  <a href="#">2349 錸德</a>
                                </div>
                              </div>
                              <button
                                x-data="optional_stock({{ user.is_authenticated|lower }})"
                                x-init="isAuthenticated? checkPickStatus('{% url 'picks:check_pick_api' 2349 %}') : false"
                                x-ref="buttonStyle"
                                @click="startPick('{% url 'picks:pick_api' 2349 %}', '{% url 'picks:unpick_api' 2349 %}', '{% url 'picks:check_pick_api' 2349 %}', `{{csrf_token}}`)"
                              ></button>
                            </li>
                            <li class="flex justify-between items-center group mt-4">
                              <div>
                                <div class="text-red-primary hover:underline">
                                  <a href="#">2371 大同</a>
                                </div>
                              </div>
                              <button
                                x-data="optional_stock({{ user.is_authenticated|lower }})"
                                x-init="isAuthenticated? checkPickStatus('{% url 'picks:check_pick_api' 2371 %}') : false"
                                x-ref="buttonStyle"
                                @click="startPick('{% url 'picks:pick_api' 2371 %}', '{% url 'picks:unpick_api' 2371 %}', '{% url 'picks:check_pick_api' 2371 %}', `{{csrf_token}}`)"
                              ></button>
                            </li>
                          </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-5">
                <div>
                    <div>
                        <header class="mb-4 leading-4">
                            <div>
                                <div class="flex justify-between relative after:content-[''] after:block after:w-full after:h-[2px] after:bg-gray-221 after:absolute after:-bottom-1 after:left-0">
                                    <div class="relative z-1">
                                        <h2 class="text-lg font-bold pb-2 -mb-[2px] border-b-[3px] border-b-red-900 leading-[18px]">系統推薦</h2>
                                    </div>
                                    <div>
                                        <a href="#" class="pt-[6px] pb-[6px] text-sm text-red-900">更多</a>
                                    </div>
                                </div>
                            </div>
                        </header>
                        <div>
                            <div>
                              <ul class="list-none">
                                {% for security_code, name in random_five_tags %}
                                <li class="flex justify-between items-center group mt-4">
                                  <div>
                                    <div class="text-red-primary hover:underline">
                                      <a href="#">{{security_code}} {{name}}</a>
                                    </div>
                                  </div>
                                  <button
                                    x-data="optional_stock({{ user.is_authenticated|lower }})"
                                    x-init="isAuthenticated? checkPickStatus('{% url 'picks:check_pick_api' security_code %}') : false"
                                    x-ref="buttonStyle"
                                    @click="startPick('{% url 'picks:pick_api' security_code %}', '{% url 'picks:unpick_api' security_code %}', '{% url 'picks:check_pick_api' security_code %}', `{{csrf_token}}`)"
                                  ></button>
                                </li>
                                {% endfor %}
                              </ul>
                                <template x-if="!isAuthenticated">
                                    {% include "layouts/not_logged.html" %}
                                </template>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</aside>

<div class="mobile-only mt-[20px]">
    <div class=" bg-gray-90 flex justify-center items-center">
        <img class=" object-cover" src="static/images/invenstment.png" alt="ad"/>
    </div>
        <div class="mt-4 mb-4">
            <div class="flex justify-between relative after:content-[''] after:block after:w-full after:h-[2px] after:bg-gray-221 after:absolute after:-bottom-[3px] after:left-0">
                <div>
                    <h2 class=" text-black text-[20px] font-bold p-2 -mb-[1px] border-b-[3px] border-b-red-900 leading-[18px]">熱門股市爆料</h2>
                </div>
            </div>
        </div>
        <div class="mt-4">
            <section x-data="unlogined_share({{ user.is_authenticated|lower }})" class="rounded-[3px] bg-white h-[72px] shadow-area">
                <div class="flex items-center gap-2 p-4">
                    <div class="w-[40px] h-[40px] rounded-full overflow-hidden">
                        <img src="{% static 'images/visitor.svg' %}" alt="visitor"></img>
                    </div>
                    <button @click="toggleVisibility" class="flex-grow pt-2 pb-2 pl-4 pr-4 text-left rounded-[50px] bg-gray-94">
                        <div class="text-[18px] font-normal leading-[21px] text-black-69">想和大家分享什麼呢？</div>
                    </button>
                    <template x-if="!isAuthenticated">
                        {% include "layouts/not_logged.html" %}
                    </template>
                    <template x-if="isAuthenticated">
                        {% include "layouts/publish_article.html" %}
                    </template>
                </div>
            </section>
            <section class="rounded-[3px] bg-white h-[60px] mt-3 shadow-area">
                <div class="relative flex flex-wrap items-center justify-between">
                    <nav class="flex items-center w-full p-[16px]">
                        <ul class="flex items-center flex-grow gap-1 overflow-x-auto">
                            <li>
                                <a href="#" class="inline-block pt-1 pb-1 pl-2 pr-2 rounded-[3px] bg-red-primary">
                                    <div class="text-[15px] text-white whitespace-nowrap relative">人氣</div>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="inline-block pt-1 pb-1 pl-2 pr-2 rounded-[3px]">
                                    <div class="text-[15px] text-dark-800 whitespace-nowrap relative">新聞</div>
                                </a>
                            </li>
                        </ul>
                        <div class="flex items-center cursor-pointer">
                            <span class="text-[14px] font-bold leading-5 tracking-[0.2px] text-black-56">最相關</span>
                            <i class="fa-solid fa-sort-down w-[10px] h-[15px] text-black-56 mb-2 ml-1 mr-1"></i>
                        </div>
                    </nav>
                </div>
            </section>

            {% if forms %}
                {{ forms.id }}
                <form action="" method="POST">
                    {% csrf_token %}

                    {% for field in forms %}
                        {{ field }}
                    {% endfor %}

                    <button>update</button>
                </form>
            {% endif %}

            {% if articles %}
                {% include "pages/main_page/_articles_list.html" with articles=articles %}
            {% else %}
                <div id="articles_container">
                    {% for article in articles %}
                        {% include "pages/main_page/_article.html" with article=article %}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>
</div>
